<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>GeomSegmentGlyph • stglpyhs</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="GeomSegmentGlyph">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">stglpyhs</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/GeomSegmentGlyph.html">GeomSegmentGlyph</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>GeomSegmentGlyph</h1>
                        <h4 data-toc-skip class="author">Nathan
Yang</h4>
            
      

      <div class="d-none name"><code>GeomSegmentGlyph.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://knicey.github.io/stglyphs/">stglpyhs</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="geomsegmentglyph">GeomSegmentGlyph<a class="anchor" aria-label="anchor" href="#geomsegmentglyph"></a>
</h2>
<p>Glyph Maps allow data to be visualized across geographic regions and
different periods of time (see <a href="https://github.com/huizezhang-sherry/cubble" class="external-link">cubble</a> for more
information). Line Segment Glyphs extend this by adding further options
to visualize multivariate spatio-temporal data. The aesthetics are
similar to that of geom_segment but with x and y major variables in
order to designate glyph placement.</p>
</div>
<div class="section level2">
<h2 id="monthly-temperatures-across-the-us">Monthly Temperatures Across the US<a class="anchor" aria-label="anchor" href="#monthly-temperatures-across-the-us"></a>
</h2>
<p>The National Oceanica and Atmosphere Administration (NOAA) provides
weather data from stations all over the US. The <code>stations</code>
dataset contains climate variables such as prerciptation, temperature,
and elevation from 10 different weather stations for every day from 2020
to 2023.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">stations</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 43,551 × 12</span></span></span>
<span><span class="co">#&gt;    id     long   lat  elev name  wmo_id date        prcp  tmax  tmin month  year</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> USC0… -<span style="color: #BB0000;">83.4</span>  35.7 <span style="text-decoration: underline;">1</span>979. MT L… <span style="color: #949494;">""</span>     2020-01-01     0  -<span style="color: #BB0000;">1.1</span>  -<span style="color: #BB0000;">8.9</span>     1  <span style="text-decoration: underline;">2</span>020</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> USC0… -<span style="color: #BB0000;">83.4</span>  35.7 <span style="text-decoration: underline;">1</span>979. MT L… <span style="color: #949494;">""</span>     2020-01-02     0   2.2  -<span style="color: #BB0000;">8.9</span>     1  <span style="text-decoration: underline;">2</span>020</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> USC0… -<span style="color: #BB0000;">83.4</span>  35.7 <span style="text-decoration: underline;">1</span>979. MT L… <span style="color: #949494;">""</span>     2020-01-03   356   8.3   1.1     1  <span style="text-decoration: underline;">2</span>020</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> USC0… -<span style="color: #BB0000;">83.4</span>  35.7 <span style="text-decoration: underline;">1</span>979. MT L… <span style="color: #949494;">""</span>     2020-01-04   178   7.8   1.7     1  <span style="text-decoration: underline;">2</span>020</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> USC0… -<span style="color: #BB0000;">83.4</span>  35.7 <span style="text-decoration: underline;">1</span>979. MT L… <span style="color: #949494;">""</span>     2020-01-05     3   1.7 -<span style="color: #BB0000;">10.6</span>     1  <span style="text-decoration: underline;">2</span>020</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> USC0… -<span style="color: #BB0000;">83.4</span>  35.7 <span style="text-decoration: underline;">1</span>979. MT L… <span style="color: #949494;">""</span>     2020-01-06     0  -<span style="color: #BB0000;">0.6</span> -<span style="color: #BB0000;">10</span>       1  <span style="text-decoration: underline;">2</span>020</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> USC0… -<span style="color: #BB0000;">83.4</span>  35.7 <span style="text-decoration: underline;">1</span>979. MT L… <span style="color: #949494;">""</span>     2020-01-07    51   1.1  -<span style="color: #BB0000;">7.2</span>     1  <span style="text-decoration: underline;">2</span>020</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> USC0… -<span style="color: #BB0000;">83.4</span>  35.7 <span style="text-decoration: underline;">1</span>979. MT L… <span style="color: #949494;">""</span>     2020-01-08    76  -<span style="color: #BB0000;">1.1</span>  -<span style="color: #BB0000;">9.4</span>     1  <span style="text-decoration: underline;">2</span>020</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> USC0… -<span style="color: #BB0000;">83.4</span>  35.7 <span style="text-decoration: underline;">1</span>979. MT L… <span style="color: #949494;">""</span>     2020-01-09     0  -<span style="color: #BB0000;">1.1</span>  -<span style="color: #BB0000;">8.9</span>     1  <span style="text-decoration: underline;">2</span>020</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> USC0… -<span style="color: #BB0000;">83.4</span>  35.7 <span style="text-decoration: underline;">1</span>979. MT L… <span style="color: #949494;">""</span>     2020-01-10     5   2.8  -<span style="color: #BB0000;">2.8</span>     1  <span style="text-decoration: underline;">2</span>020</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 43,541 more rows</span></span></span></code></pre></div>
<p>For this example, we are interesting in finding out the average
minimum and maximum temperature per month across all days and all years
per each station. We do this by using the dplyr functions
<code>group_by</code> and <code>summarise</code></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">grouped</span> <span class="op">&lt;-</span> <span class="va">stations</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">month</span>, <span class="va">name</span>, <span class="va">long</span>, <span class="va">lat</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span></span>
<span>    avgmin <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">tmin</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    avgmax <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">tmax</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; `summarise()` has grouped output by 'month', 'name', 'long'. You can override</span></span>
<span><span class="co">#&gt; using the `.groups` argument.</span></span></code></pre></div>
<p>With the default rescaling parameters, this is the resulting geom
segment glyph along with a geom_point to help illustrate the station
location that each segment glyph corresponds to.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">grouped</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">mainland_us</span>, color <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggthemes</span><span class="fu">::</span><span class="fu"><a href="http://jrnold.github.io/ggthemes/reference/theme_map.html" class="external-link">theme_map</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">long</span>, y <span class="op">=</span> <span class="va">lat</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/glyph.html">geom_segment_glyph</a></span><span class="op">(</span></span>
<span>    width <span class="op">=</span> <span class="fl">0.4</span>,</span>
<span>    height <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span>
<span>    x_major <span class="op">=</span> <span class="va">long</span>, </span>
<span>    y_major <span class="op">=</span> <span class="va">lat</span>, </span>
<span>    x_minor <span class="op">=</span> <span class="va">month</span>, </span>
<span>    y_minor <span class="op">=</span> <span class="va">avgmin</span>, </span>
<span>    yend_minor <span class="op">=</span> <span class="va">avgmax</span><span class="op">)</span></span>
<span>    <span class="op">)</span> </span></code></pre></div>
<p><img src="GeomSegmentGlyph_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<p>GeomSegmentGlyph additionally offers ways to rescale the glyphs.
Here, we can specify rescale11x as the preferred rescaling for x to
center the glyph on the station.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">grouped</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">mainland_us</span>, color <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggthemes</span><span class="fu">::</span><span class="fu"><a href="http://jrnold.github.io/ggthemes/reference/theme_map.html" class="external-link">theme_map</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">long</span>, y <span class="op">=</span> <span class="va">lat</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/glyph.html">geom_segment_glyph</a></span><span class="op">(</span></span>
<span>    x_scale <span class="op">=</span> <span class="va">rescale11x</span>,</span>
<span>    width <span class="op">=</span> <span class="fl">2</span>,</span>
<span>    height <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span>
<span>    x_major <span class="op">=</span> <span class="va">long</span>, </span>
<span>    y_major <span class="op">=</span> <span class="va">lat</span>, </span>
<span>    x_minor <span class="op">=</span> <span class="va">month</span>, </span>
<span>    y_minor <span class="op">=</span> <span class="va">avgmin</span>, </span>
<span>    yend_minor <span class="op">=</span> <span class="va">avgmax</span><span class="op">)</span></span>
<span>    <span class="op">)</span> </span></code></pre></div>
<p><img src="GeomSegmentGlyph_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<p>Furthermore, there are options for y-scaling that include centering
the glyph vertically on the station location.</p>
<p><img src="GeomSegmentGlyph_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<p>These rescaling past examples have all been made with global
rescaling enabled (default) which results in the glyphs being
differently sized according to their values relative to each other.
Turning off global rescaling allows all glpyhs to rescale within their
own individual values and produce glyphs that sized more evenly.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">grouped</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">mainland_us</span>, color <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggthemes</span><span class="fu">::</span><span class="fu"><a href="http://jrnold.github.io/ggthemes/reference/theme_map.html" class="external-link">theme_map</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">long</span>, y <span class="op">=</span> <span class="va">lat</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/glyph.html">geom_segment_glyph</a></span><span class="op">(</span></span>
<span>    x_scale <span class="op">=</span> <span class="va">rescale11x</span>,</span>
<span>    y_scale <span class="op">=</span> <span class="va">rescale11y</span>,</span>
<span>    global_rescale <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    width <span class="op">=</span> <span class="fl">2</span>,</span>
<span>    height <span class="op">=</span> <span class="fl">3</span>,</span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span>
<span>    x_major <span class="op">=</span> <span class="va">long</span>, </span>
<span>    y_major <span class="op">=</span> <span class="va">lat</span>, </span>
<span>    x_minor <span class="op">=</span> <span class="va">month</span>, </span>
<span>    y_minor <span class="op">=</span> <span class="va">avgmin</span>, </span>
<span>    yend_minor <span class="op">=</span> <span class="va">avgmax</span><span class="op">)</span></span>
<span>    <span class="op">)</span> </span></code></pre></div>
<p><img src="GeomSegmentGlyph_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="observations-and-insights">Observations and Insights<a class="anchor" aria-label="anchor" href="#observations-and-insights"></a>
</h2>
<p>Line Segment Glyphs offer unique insights into seasonal temperature
trends across the US. Turning off global rescaling shows that most
stations generally followed the same curvature trends relative to their
lowest temperatures. However factoring in global rescaling, certain
locations show much less total variation in temperature such as
California and Florida.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Nathan Yang.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
